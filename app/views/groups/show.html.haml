%h1 Listing announcements

= link_to 'New Annoucement', new_announcement_path

#new_announcement
  = form_for @new_announcement, remote: true do |f|
    .field
      = f.label :title
      = f.text_field :title
    .field
      = f.label :description
      = f.text_area :description, rows: 10, cols: 60
    .field
      = f.label :city
      = f.text_field :city
    .field
      = f.label :exp_date
      = f.date_select :exp_date
    .field
      = f.label :group
      =collection_select(:announcement, :group_id, Group.all, :id, :group_name)
    .actions
      = f.submit 'Save'


%table
  %thead
    %tr
      %th Title
      %th Description
      %th City
      %th Exp date
      %th User
      %th Group
      %th
      %th
      %th

  %tbody
    - @group.announcements.each do |announcement|
      %tr
        %td= announcement.title
        %td= announcement.description
        %td= announcement.city
        %td= announcement.exp_date
        %td= announcement.user.username
        %td= announcement.group.group_name
        %td= link_to 'Show', announcement
        - if current_user[:id] == announcement.user_id
          %td= link_to 'Edit', edit_announcement_path(announcement)
          %td= link_to 'Destroy', announcement, method: :delete, data: { confirm: 'Are you sure?' }

%br



